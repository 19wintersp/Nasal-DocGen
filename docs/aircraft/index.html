<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<title>Namespace globals.aircraft</title>

		<meta name="color-scheme" content="dark light" />
		<meta name="description" content="This module provide basic functions and classes for use in aircraft specific
Nasal context.
" />
		<meta name="generator" content="nasal-docgen" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />

		<meta name="og:description" content="This module provide basic functions and classes for use in aircraft specific
Nasal context.
" />
		<meta name="og:image" content="../card.png" />
		<meta name="og:locale" content="en" />
		<meta name="og:site_name" content="Library globals" />
		<meta name="og:title" content="Namespace globals.aircraft" />
		<meta name="og:type" content="website" />
		<!-- <meta name="og:url" content="..." /> -->

		<link rel="stylesheet" href="../style.css" />

		<link rel="apple-touch-icon" href="../icon.png" />
		<!-- <link rel="canonical" href="..." /> -->
		<link rel="icon" href="../favicon.png" />
	</head>

	<body>
		<details id="toggle">
			<summary>
				<header>
					<h2>Library <a href="../index.html">globals</a></h2>
					<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 4H21V6H3V4ZM3 11H21V13H3V11ZM3 18H21V20H3V18Z" /></svg>
				</header>
			</summary>
		</details>

		<nav>
			<h2>Library <a href="../index.html">globals</a></h2>

			<ul class="flex">
				<li><a href="../list.html">All items</a></li>
				<li><a href="../src.html">Sources</a></li>
			</ul>

			<div class="flex">
				<h3>Namespace</h3>
				<ul class="flex">
					<li><a href="#description">Description</a></li>
										 <li><a href="#classes">Classes</a></li> 					 <li><a href="#funcs">Functions</a></li> 					 <li><a href="#vars">Variables</a></li> 				</ul>
			</div>

			<div class="spacer"></div>

			<footer>
				<p class="mini">
					Generated by
					<a href="https://github.com/19wintersp/Nasal-DocGen">nasal-docgen</a>
					on 2023-05-16.
				</p>
			</footer>
		</nav>

		<main>
			<h1>
				
					<span>Namespace</span>
					
						<a href="../index.html">
							globals
						</a>
						<svg class="sep" width="14" height="16" viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><title>.</title><path d="M13.8564 8L0 16V0L13.8564 8Z" /></svg>
										<span>aircraft</span>
							</h1>

			
				<p><a href="../src/aircraft.nas.html#1">
					View source
				</a></p>
			
			<div id="description"><pre>This module provide basic functions and classes for use in aircraft specific
Nasal context.
</pre></div>

			
			
				<h2 id="classes">Classes</h2>

				
					<div class="flex">
						<h3><a href="HUD/index.html">HUD</a></h3>
						 <p>HUD control class to handle both HUD implementations
==============================================================================

</p> 					</div>
				
					<div class="flex">
						<h3><a href="angular_lowpass/index.html">angular_lowpass</a></h3>
						 <p>angular lowpass
==============================================================================
same as above, but for angles. Filters sin/cos separately and calculates the
angle again from them. This avoids unexpected jumps from 179.99 to -180 degree.

</p> 					</div>
				
					<div class="flex">
						<h3><a href="autotrim/index.html">autotrim</a></h3>
						 <p>autotrim
=============================================================================
Singleton class that supports quick trimming and compensates for the lack
of resistance/force feedback in most joysticks. Normally the pilot trims such
that no real or artificially generated (by means of servo motors and spring
preloading) forces act on the stick/yoke and it is in a comfortable position.
This doesn&#39;t work well on computer joysticks.

SYNOPSIS:
autotrim.start();  # on key/button press
autotrim.stop();   # on key/button release (mod-up)

USAGE:
(1) move the stick such that the aircraft is in an orientation that
you want to trim for (forward flight, hover, ...)
(2) press autotrim button and keep it pressed
(3) move stick/yoke to neutral position (center)
(4) release autotrim button

</p> 					</div>
				
					<div class="flex">
						<h3><a href="crossfeed_valve/index.html">crossfeed_valve</a></h3>
						 <p>crossfeed_valve
=============================================================================
class that creates a fuel tank cross-feed valve. Designed for YASim aircraft;
JSBSim aircraft can simply use systems code within the FDM (see 747-400 for
an example).

WARNING: this class requires the tank properties to be ready, so call new()
after the FDM is initialized.

SYNOPSIS:
crossfeed_valve.new(&#60;max_flow_rate&#62;, &#60;property&#62;, &#60;tank&#62;, &#60;tank&#62;, ... );
crossfeed_valve.open(&#60;update&#62;);
crossfeed_valve.close(&#60;update&#62;);

&#60;max_flow_rate&#62;	... maximum transfer rate between the tanks in lbs/sec
&#60;property&#62;	... property path to use as switch - pass nil to use no such switch
&#60;tank&#62;		... number of a tank to connect - can have unlimited number of tanks connected
&#60;update&#62;	... update switch property when opening/closing valve via Nasal - 0 or 1; by default, 1


EXAMPLES:
aircraft.crossfeed_valve.new(0.5, &#34;/controls/fuel/x-feed&#34;, 0, 1, 2);
-------
var xfeed = aircraft.crossfeed_valve.new(1, nil, 0, 1);
xfeed.open();

</p> 					</div>
				
					<div class="flex">
						<h3><a href="data/index.html">data</a></h3>
						 <p>data
==============================================================================
class that loads and saves properties to aircraft-specific data files in
~/.fgfs/aircraft-data/ (Unix) or %APPDATA%\flightgear.org\aircraft-data\.
There&#39;s no public constructor, as the only needed instance gets created
by the system.

SYNOPSIS:
data.add(&#60;properties&#62;);
data.save([&#60;interval&#62;])

properties  ... about any combination of property nodes (props.Node)
or path name strings, or lists or hashes of them,
lists of lists of them, etc.
interval    ... save in &#60;interval&#62; minutes intervals, or only once
if &#39;nil&#39; or empty (and again at reinit/exit)

SIGNALS:
/sim/signals/save   ... set to &#39;true&#39; right before saving. Can be used
to update values that are to be saved

EXAMPLE:
var p = props.globals.getNode(&#34;/sim/model&#34;, 1);
var vec = [p, p];
var hash = {&#34;foo&#34;: p, &#34;bar&#34;: p};

# add properties
aircraft.data.add(&#34;/sim/fg-root&#34;, p, &#34;/sim/fg-home&#34;);
aircraft.data.add(p, vec, hash, &#34;/sim/fg-root&#34;);

# now save only once (and at exit/reinit, which is automatically done)
aircraft.data.save();

# or save now and every 30 sec (and at exit/reinit)
aircraft.data.save(0.5);

</p> 					</div>
				
					<div class="flex">
						<h3><a href="door/index.html">door</a></h3>
						 <p>door
==============================================================================
class for objects moving at constant speed, with the ability to
reverse moving direction at any point. Appropriate for doors, canopies, etc.

SYNOPSIS:
door.new(&#60;property&#62;, &#60;swingtime&#62; [, &#60;startpos&#62;]);

property   ... door node: property path or node
swingtime  ... time in seconds for full movement (0 -&#62; 1)
startpos   ... initial position      (default: 0)

PROPERTIES:
./position-norm   (double)     (default: &#60;startpos&#62;)
./enabled         (bool)       (default: 1)

EXAMPLE:
var canopy = aircraft.door.new(&#34;sim/model/foo/canopy&#34;, 5);
canopy.open();

</p> 					</div>
				
					<div class="flex">
						<h3><a href="light/index.html">light</a></h3>
						 <p>light
==============================================================================
class for generation of pulsing values. Appropriate for controlling
beacons, strobes, etc.

SYNOPSIS:
light.new(&#60;property&#62;, &#60;pattern&#62; [, &#60;switch&#62;]);
light.new(&#60;property&#62;, &#60;stretch&#62;, &#60;pattern&#62; [, &#60;switch&#62;]);

property   ... light node: property path or node
stretch    ... multiplicator for all pattern values
pattern    ... array of on/off time intervals (in seconds)
switch     ... property path or node to use as switch   (default: ./enabled)
instead of ./enabled

PROPERTIES:
./state           (bool)   (default: 0)
./enabled         (bool)   (default: 0) except if &#60;switch&#62; given)

EXAMPLES:
aircraft.light.new(&#34;sim/model/foo/beacon&#34;, [0.4, 0.4]);    # anonymous light
-------
var strobe = aircraft.light.new(&#34;sim/model/foo/strobe&#34;, [0.05, 0.05, 0.05, 1],
&#34;controls/lighting/strobe&#34;);
strobe.switch(1);
-------
var switch = props.globals.getNode(&#34;controls/lighting/strobe&#34;, 1);
var pattern = [0.02, 0.03, 0.02, 1];
aircraft.light.new(&#34;sim/model/foo/strobe-top&#34;, 1.001, pattern, switch);
aircraft.light.new(&#34;sim/model/foo/strobe-bot&#34;, 1.005, pattern, switch);

</p> 					</div>
				
					<div class="flex">
						<h3><a href="livery/index.html">livery</a></h3>
						 <p>livery
=============================================================================
Class that maintains livery XML files (see English Electric Lightning for an
example). The last used livery is saved on exit and restored next time. Livery
files are regular PropertyList XML files whose properties are copied to the
main tree.

SYNOPSIS:
livery.init(&#60;livery-dir&#62; [, &#60;name-path&#62; [, &#60;sort-path&#62;]]);

&#60;livery-dir&#62; ... directory with livery XML files, relative to $FG_ROOT
&#60;name-path&#62;  ... property path to the livery name in the livery files
and the property tree (default: sim/model/livery/name)
&#60;sort-path&#62;  ... property path to the sort criterion (default: same as
&#60;name-path&#62; -- that is: alphabetic sorting)

EXAMPLE:
aircraft.livery.init(&#34;Aircraft/Lightning/Models/Liveries&#34;,
&#34;sim/model/livery/variant&#34;,
&#34;sim/model/livery/index&#34;);  # optional

aircraft.livery.dialog.toggle();
aircraft.livery.select(&#34;OEBH&#34;);
aircraft.livery.next();

</p> 					</div>
				
					<div class="flex">
						<h3><a href="livery_update/index.html">livery_update</a></h3>
						 <p>livery_update
=============================================================================
Class for maintaining liveries in MP aircraft. It is used in Nasal code that&#39;s
embedded in aircraft animation XML files, and checks in intervals whether the
parent aircraft has changed livery, in which case it changes the livery
in the remote aircraft accordingly. This class is a wrapper for overlay_update.

SYNOPSIS:
livery_update.new(&#60;livery-dir&#62; [, &#60;interval:10&#62; [, &#60;func&#62;]]);

&#60;livery-dir&#62; ... directory with livery files, relative to $FG_ROOT
&#60;interval&#62;   ... checking interval in seconds (default: 10)
&#60;func&#62;       ... callback function that&#39;s called with the ./sim/model/livery/file
contents as argument whenever the livery has changed. This can
be used for post-processing.

EXAMPLE:
&#60;nasal&#62;
&#60;load&#62;
var livery_update = aircraft.livery_update.new(
&#34;Aircraft/R22/Models/Liveries&#34;, 30,
func print(&#34;R22 livery update&#34;));
&#60;/load&#62;

&#60;unload&#62;
livery_update.stop();
&#60;/unload&#62;
&#60;/nasal&#62;

</p> 					</div>
				
					<div class="flex">
						<h3><a href="lowpass/index.html">lowpass</a></h3>
						 <p>lowpass
==============================================================================
class that implements a variable-interval EWMA (Exponentially Weighted
Moving Average) lowpass filter with characteristics independent of the
frame rate.

SYNOPSIS:
lowpass.new(&#60;coefficient&#62;);

EXAMPLE:
var lp = aircraft.lowpass.new(1.5);
print(lp.filter(10));  # prints 10
print(lp.filter(0));

</p> 					</div>
				
					<div class="flex">
						<h3><a href="overlay_update/index.html">overlay_update</a></h3>
						 <p>overlay_update
=============================================================================
Class for maintaining overlays in MP aircraft. It is used in Nasal code that&#39;s
embedded in aircraft animation XML files, and checks in intervals whether the
parent aircraft has changed an overlay, in which case it copies the respective
overlay to the aircraft&#39;s root directory.

SYNOPSIS:
livery_update.new();
livery_update.add(&#60;overlay-dir&#62;, &#60;property&#62; [, &#60;callback&#62;]);

&#60;overlay-dir&#62; ... directory with overlay files, relative to $FG_ROOT
&#60;property&#62;    ... MP property where the overlay file name can be found
(usually one of the sim/multiplay/generic/string properties)
&#60;callback&#62;    ... callback function that&#39;s called with two arguments:
the file name (without extension) and the overlay directory

EXAMPLE:
&#60;nasal&#62;
&#60;load&#62;
var update = aircraft.overlay_update.new();
update.add(&#34;Aircraft/F4U/Models/Logos&#34;, &#34;sim/multiplay/generic/string&#34;);
&#60;/load&#62;

&#60;unload&#62;
update.stop();
&#60;/unload&#62;
&#60;/nasal&#62;

</p> 					</div>
				
					<div class="flex">
						<h3><a href="rain/index.html">rain</a></h3>
						 <p>rain
=============================================================================
Provides a property which can be used to control rain. Can be used to turn
off rain in internal views, and or used with a texture on canopies etc.
The output is co-ordinated with system precipitation:

/sim/model/rain/raining-norm  rain intensity
/sim/model/rain/flow-mps      drop flow speed [m/s]

See Hawker Seahawk for an example.

SYNOPSIS:
aircraft.rain.init();
aircraft.rain.update();

</p> 					</div>
				
					<div class="flex">
						<h3><a href="steering/index.html">steering</a></h3>
						 <p>steering
=============================================================================
Class that implements differential braking depending on rudder position.
Note that this overrides the controls.applyBrakes() wrapper. If you need
your own version, then override it again after the steering.init() call.

SYNOPSIS:
steering.init([&#60;property&#62; [, &#60;threshold&#62;]]);

&#60;property&#62;  ... property path or props.Node hash that enables/disables
brake steering (usually bound to the js trigger button)
&#60;threshold&#62; ... defines range (+- threshold) around neutral rudder
position in which both brakes are applied

EXAMPLES:
aircraft.steering.init(&#34;/controls/gear/steering&#34;, 0.2);
aircraft.steering.init();

</p> 					</div>
				
					<div class="flex">
						<h3><a href="timer/index.html">timer</a></h3>
						 <p>timer
==============================================================================
class that implements timer that can be started, stopped, reset, and can
have its value saved to the aircraft specific data file. Saving the value
is done automatically by the aircraft.Data class.

SYNOPSIS:
timer.new(&#60;property&#62; [, &#60;resolution:double&#62; [, &#60;save:bool&#62;]])

&#60;property&#62;   ... property path or props.Node hash that holds the timer value
&#60;resolution&#62; ... timer update resolution -- interval in seconds in which the
timer property is updated while running (default: 1 s)
&#60;save&#62;       ... bool that defines whether the timer value should be saved
and restored next time, as needed for Hobbs meters
(default: 1)

EXAMPLES:
var hobbs_turbine = aircraft.timer.new(&#34;/sim/time/hobbs/turbine[0]&#34;, 60);
hobbs_turbine.start();

aircraft.timer.new(&#34;/sim/time/hobbs/battery&#34;, 60).start();  # anonymous timer

</p> 					</div>
				
					<div class="flex">
						<h3><a href="tyresmoke/index.html">tyresmoke</a></h3>
											</div>
				
					<div class="flex">
						<h3><a href="tyresmoke_system/index.html">tyresmoke_system</a></h3>
											</div>
							
			
				<h2 id="funcs">Functions</h2>

				
					<div class="flex">
						<h3><a href="func.kias_to_ktas.html">kias_to_ktas</a></h3>
						 <p>returns true airspeed for given indicated airspeed [kt] and altitude [m]

</p> 					</div>
				
					<div class="flex">
						<h3><a href="func.makeNode.html">makeNode</a></h3>
						 <p>creates (if necessary) and returns a property node from arg[0],
which can be a property node already, or a property path

</p> 					</div>
				
					<div class="flex">
						<h3><a href="func.optarg.html">optarg</a></h3>
						 <p>returns args[index] if available and non-nil, or default otherwise

</p> 					</div>
				
					<div class="flex">
						<h3><a href="func.teleport.html">teleport</a></h3>
						 <p>teleport
=============================================================================
Usage:  aircraft.teleport(lat:48.3, lon:32.4, alt:5000);

</p> 					</div>
				
					<div class="flex">
						<h3><a href="func.wind_speed_from.html">wind_speed_from</a></h3>
						 <p>returns wind speed [kt] from given direction [deg]; useful for head-wind

</p> 					</div>
							
			
				<h2 id="vars">Variables</h2>

				
					<div class="flex">
						<h3><a href="var.ac.html">ac</a></h3>
						 <p>temporary hack to provide backward compatibility for /sim/auto-coordination
remove this code when all references to /sim/auto-coordination are gone
</p> 					</div>
									</main>
	</body>
</html>
